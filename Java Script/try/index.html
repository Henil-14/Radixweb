<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  NAME:
  <input type="text" id="name"><br><br>
  E-MAIL
  <input type="email" id="email"><br><br>
  GENDER:
  <input type="radio" name="gender" value="male">MALE
  <input type="radio" name="gender" value="female">FEMALE
  <br><br>
  STATUS:
  <input type="radio" name="status" value="active">ACTIVE
  <input type="radio" name="status" value="inactive">INACTIVE<br><br>
  <button type="button" onclick="get()">GET DATA</button>
  <button type="button" onclick="post()">POST DATA</button>
  <table id="table"> </table>
  <script>
    function get() {


      var myHeaders = new Headers();
      myHeaders.append("Authorization", "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c");

      var requestOptions = {
        method: 'GET',
        headers: myHeaders,
        redirect: 'follow'
      };

      fetch("https://gorest.co.in/public/v2/users", requestOptions)
        .then(response => response.text())
        .then(async function (result) { await call(result) })
        .catch(error => console.log('error', error));
      function call(result) {
        var tab = []
        var obj = JSON.parse(result);
        var tab = tab + ` <tr><th>id</th> <th>NAME </th> <th>E-MAIL </th><th> GENDER</th>  <th>STATUS </th>  </tr> `
        for (i = 0; i < obj.length; i++) {
          tab += `<tr><td>${obj[i].id} </td>  <td>${obj[i].name} </td> <td>${obj[i].email} </td><td> ${obj[i].gender} </td> <td>${obj[i].status}  </td><td><button onclick="del(${obj[i].id})"> Delete</button></td><td><button onclick="upd(${obj[i].id})"> Update</button></td>  </tr> `
        }
        document.getElementById("table").innerHTML = tab
      }
    }
    function del(id) {
      var myHeaders = new Headers();
      myHeaders.append("Authorization", "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c");

      var requestOptions = {
        method: 'DELETE',
        headers: myHeaders,
        redirect: 'follow'
      };

      fetch(`https://gorest.co.in/public/v2/users/${id}`, requestOptions)
        .then(response => response.text())
        .then(result => console.log(result))
        .catch(error => console.log('error', error));
      get();
    }

    // function upd(id) {
    //   var myHeaders = new Headers();
    //   myHeaders.append("Authorization", "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c");

    //   var requestOptions = {
    //     method: 'PATCH',
    //     headers: myHeaders,
    //     redirect: 'follow'
    //   };

    //   fetch(`https://gorest.co.in/public/v2/users/${id}`, requestOptions)
    //     .then(response => response.text())
    //     .then(result => console.log(result))
    //     .catch(error => console.log('error', error));
    // }

    function post() {
      var n = document.getElementById("name").value

      var e = document.getElementById("email").value

      var g = document.getElementsByName("gender")

      for (i = 0; i < g.length; i++) {
        if (g[i].checked)
          var gen = g[i].value

      }
      var s = document.getElementsByName("status")
      for (i = 0; i < s.length; i++) {
        if (s[i].checked)
          var stat = s[i].value

      }
      var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c");
myHeaders.append("Content-Type", "application/json");

var raw = JSON.stringify({
  name: n,
  email: e,
  gender: gen,
  status: stat
});

var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: raw,
  redirect: 'follow'
};

fetch("https://gorest.co.in/public/v2/users", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));
}
  </script>
</body>

</html>