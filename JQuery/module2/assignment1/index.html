<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">

    </style>
    <title>Assignment 1</title>
</head>

<body class="border-2">
    <div class=" flex flex-col gap-10 bg-gray-300">


        <div class=" bg-white  rounded-xl m-1 lg:w-1/4    sm:w-1/2 sm:mx-auto p-2 shadow-2xl  text-gray-800 text-lg">
            <form action="" class="flex flex-col gap-y-10 ">
                <p class="text-2xl text-center" id="empid" value="">Employee form</p>
                <div class="flex justify-around ">

                    <label for="first" class="w-1/2 mx-1 text-center" ><strong>First Name</strong>
                        
                        <input type="text" name="first" id="first" class="text-black   border-b-2 w-full" placeholder="First Name" />
                    </label>



                    <label for="last" class="w-1/2 mx-1 text-center" ><strong> Last Name</strong>
                       
                        <input type="text" name="last" id="last" class="text-black   border-b-2 w-full" placeholder="Last Name"/>
                    </label>

                </div>
                <div>
                    <label for="email"><strong>Email Address</strong> 
                        <input type="email" name="" id="email" class="text-black   border-b-2 w-full" placeholder="abc@gmail.com">
                    </label>
                </div>

                <div>
                    <div><strong>Select Gender</strong>

                    </div>
                    <div class="flex justify-evenly">


                        <label for="male">
                            <input type="radio" name="gender" id="male" value="male">Male
                        </label>
                        <label for="male">
                            <input type="radio" name="gender" id="female" value="female">Female
                        </label>
                    </div>
                </div>

                <div>
                    <div><strong>Select Status</strong> 

                    </div>
                    <div class="flex justify-evenly">


                        <label for="Active">
                            <input type="radio" name="status" id="active" value="Active">Active
                        </label>
                        <label for="Inactive">
                            <input type="radio" name="status" id="inactive" value="Inactive">Inactive
                        </label>
                    </div>
                </div>
                <div class="flex justify-evenly">
                    <input type="button" value="Get Data" class="bg-black text-white  p-3">
                    <input type="button" value="Post Data"  class="bg-black text-white  p-3">
                    <input type="button" value="Update" class="bg-black text-white  p-3">
                </div>
            </form>
        </div>


        <div id="output" class="flex flex-wrap justify-around text-sm gap-2 p-3">



        </div>
    </div>

</body>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
<script>
    function getData() {


        var settings = {
            "url": "https://gorest.co.in/public/v2/users",
            "method": "GET",
            "timeout": 0,
            "headers": {
                "Authorization": "Bearer e4a0a586eaa867f6eddf01ceb1bf8da3f4b4953d0471c6cf9eed57b291dc4697"
            },
        };

        $.ajax(settings).done(function (response) {
            call(response)
        });

        function call(data) {


            var t = $('#output');

            var pr;
            var h4;

            var g;
            t.html("")
            for (let d of data) {
         
                (d.gender === "male");

                if (d.status === "active") {

                    h4 = "bg-green-400";
                }

                if (d.status === "inactive") {

                    h4 = "bg-red-500";
                }
                t.append( `<div class="w-full sm:w-1/3 lg:w-1/5  border border-gray-500 rounded-lg p-2 flex flex-col gap-y-4 bg-gray-800 bg-opacity-50  hover:scale-105"> <h3 class="${h4}"> </h3> <p class="text-white uppercase text-center"><strong>Id: ${d.id}</strong></p>  ${d.name}</h1>  <h2 >${d.email}</h2><div class="">  </div>
                <div class = "flex justify-around gap-x-5">
                    <button  class="bg-black text-white border rounded p-3" onclick="updateData(${d.id})">update</button>
                    <button  class="bg-black text-white  p-3 border rounded" 
                    onclick="deleteData(${d.id})">Delete</button>
                    </div>
                </div>` )
            }

        }

    }




    function postData() {
        var settings = {
            "url": "https://gorest.co.in/public/v2/users",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Authorization": "Bearer e4a0a586eaa867f6eddf01ceb1bf8da3f4b4953d0471c6cf9eed57b291dc4697",
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                name: ` ${$('#first').val()} ${$('#last').val()}`,
                email: $('#email').val(),
                gender: $('input[name=gender]:checked').val(),
                status: $('input[name=status]:checked').val()
            }),
        };

        $.ajax(settings).done(function (response) {
            console.log(response);
        });


        ` ${$('#first').val("")} ${$('#last').val("")}`;
        $('#email').val("");
        $('input[type=radio]').prop("checked", false);
    }


    function deleteData(id) {

        var settings = {
            "url": "https://gorest.co.in/public/v2/users/" + id,
            "method": "DELETE",
            "timeout": 0,
            "headers": {
                "Authorization": "Bearer e4a0a586eaa867f6eddf01ceb1bf8da3f4b4953d0471c6cf9eed57b291dc4697"
            },
        };

        $.ajax(settings).done(function (response) {
            console.log(response);
        });

        alert('data deleted')
        getData();
    }


    function updateData(id) {
        update.show();
        var settings = {
            "url": "https://gorest.co.in/public/v2/users/" + id,
            "method": "GET",
            "timeout": 0,
            "headers": {
                "Authorization": "Bearer e4a0a586eaa867f6eddf01ceb1bf8da3f4b4953d0471c6cf9eed57b291dc4697"
            },
        };

        $.ajax(settings).done(function (response) {
            put(response)

        });

        function put(data) {
            get.hide();
            post.hide();
            let first = data.name;
            first = first.trim();
            first = first.split(" ");
            $('#first').val(first[0]);
            $('#last').val(first[1]);
            $('#email').val(data.email);
            if (data.gender === "male") {
                $('#male').prop("checked", true);
            }
            else {
                $('#female').prop("checked", true);
            }

            if (data.status === "active") {
                $('#active').prop("checked", true);
            }
            else {
                $('#inactive').prop("checked", true);
            }
            $('#empid').val(data.id)
        }

    }

    function updated(id) {
        var settings = {
            "url": "https://gorest.co.in/public/v2/users/" + id,
            "method": "PATCH",
            "timeout": 0,
            "headers": {
                "Authorization": "Bearer e4a0a586eaa867f6eddf01ceb1bf8da3f4b4953d0471c6cf9eed57b291dc4697",
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                name: ` ${$('#first').val()} ${$('#last').val()}`,
                email: $('#email').val(),
                gender: $('input[name=gender]:checked').val(),
                status: $('input[name=status]:checked').val()
            }),
        };

        $.ajax(settings).done(function (response) {
            console.log(response);
        });

        ` ${$('#first').val("")} ${$('#last').val("")}`;
        $('#email').val("");
        $('input[type=radio]').prop("checked", false);

        post.show();
        get.show();
        update.hide();
    }

    let get = $('input[type=button]:eq(0)');
    get.click(function () {

        getData();
    })
    let post = $('input[type=button]:eq(1)');
    post.click(function () {
        postData(),
            alert("new data Added"),
            getData()
    })
    var id = $('#empid');
    let update = $('input[type=button]:eq(2)');
    update.hide();
    update.click(function () {
        updated(id.val()),
            alert("Data Updated"),
            getData()
    })



</script>

</html>