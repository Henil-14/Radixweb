<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  </head>

  <body>
    <main>
      <div class="container">
        <form>
          <label for="id" class="h3">ID:</label
          ><input type="text" class="form-control" id="fid" />
          <label for="name" class="h3">Name:</label
          ><input type="text" class="form-control" id="fname" />
          <label for="email" class="h3">Email:</label
          ><input type="email" class="form-control" id="femail" />
          <label for="gender" class="h3">Gender:</label>
          <input type="radio" id="male" name="gender" value="male" /><label
            for="male"
            class="h5 mx-2"
            >Male</label
          >
          <input type="radio" id="female" name="gender" value="female" /><label
            for="male"
            class="h5 mx-2"
            >Female</label
          ><br />
          <label for="status" class="h3">Status:</label>
          <input type="radio" id="active" name="status" value="active" /><label
            for="active"
            class="h5 mx-2"
            >Active</label
          >
          <input
            type="radio"
            id="inactive"
            name="status"
            value="inactive"
          /><label for="inactive" class="h5 mx-2">Inactive</label>
        </form>
        <a id="getdata" href="#"
          ><button class="bg-secondary text-light p-2 h4">Get Data</button></a
        >
        <a id="postdata" href="#"
          ><button class="bg-secondary text-light p-2 h4">Post Data</button></a
        >
        <a id="updated" href="#"
          ><button class="bg-secondary text-light p-2 h4">Update</button></a
        >
        <p id="show"></p>
      </div>
      <script>
        $('#getdata').click(function () {
          $.getJSON('https://gorest.co.in/public/v2/users', function (data) {
            var text = $(
              "<table class='table'><tr class='table-primary'><th>ID</th><th>Name</th><th>Email</th><th>Gender</th><th>Status</th>"
            );
            for (i = 0; i < data.length; i++) {
              text.append(
                `<tr><td class='table-secondary'>${data[i].id}</td><td class='table-secondary'>${data[i].name}</td><td class='table-secondary'>${data[i].email}</td><td class='table-secondary'>${data[i].gender}</td><td class='table-secondary'>${data[i].status}</td><td class='table-secondary'><button id='updatecustomer' class='btn btn-success' onclick="edit(${data[i].id})">update</button><td class='table-secondary'><button class='btn btn-danger' onclick='deleteid(${data.id})'>Delete</button></tr>`
              );
            }
            $('#show').html(text);
          });
        });

        $('#postdata').click(function (e) {
          e.preventDefault();
          let getid = $('#fid').val();
          let getname = $('#fname').val();
          let getemail = $('#femail').val();
          let getgen = $("[name = 'gender']:checked").val();
          let getstatus = $("[name = 'status']:checked").val();

          var settings = {
            url: 'https://gorest.co.in/public/v2/users',
            method: 'POST',
            timeout: 0,
            headers: {
              Authorization:
                'Bearer 7689da6cc2af9e209fdc66ca8f14cd4f3522db90a2c849bf09d0400ec7570eda',
              'Content-Type': 'application/json',
            },
            data: JSON.stringify({
              id: getid,
              name: getname,
              email: getemail,
              gender: getgen,
              status: getstatus,
            }),
          };
          $.ajax(settings).done(function (response) {
            console.log(response);
          });
        });

        function deleteid(pid) {
          var settings = {
            url: 'https://gorest.co.in/public/v2/users' + pid,
            method: 'DELETE',
            timeout: 0,
            headers: {
              Authorization:
                'Bearer 7689da6cc2af9e209fdc66ca8f14cd4f3522db90a2c849bf09d0400ec7570eda',
            },
          };

          $.ajax(settings).done(function (response) {
            console.log(response);
          });
          alert('Deleted...');
        }

        $('#updated').click((uid) => {
          var settings = {
            url: 'https://gorest.co.in/public/v2/users',
            method: 'PATCH',
            timeout: 0,
            headers: {
              Authorization:
                'Bearer 7689da6cc2af9e209fdc66ca8f14cd4f3522db90a2c849bf09d0400ec7570eda',
            },
            data: JSON.stringify({
              name: $('#fname').val(),
              email: $('#femail').val(),
              gender: $('[name = gender].checked').val(),
              status: $('[name = status].ckecked]').val(),
            }),
          };

          $.ajax(settings).done(function (response) {
            console.log(response);
          });
        });

        function edit(id) {
          console.log(id);
          var settings = {
            url: 'https://gorest.co.in/public/v2/users/' + id,
            method: 'GET',
            timeout: 0,
            headers: {
              Authorization:
                'Bearer 7689da6cc2af9e209fdc66ca8f14cd4f3522db90a2c849bf09d0400ec7570eda',
            },
          };

          $.ajax(settings).done(function (response) {
            call(response);
          });
          function call(response) {
            $('#fname').val(response.name), $('#femail').val(response.email);
            if (response.gender == 'male') {
              $('input[id = male]').prop('checked', true);
            } else {
              $('input[id = female]').prop('checked', true);
            }

            if (response.status == 'active') {
              $('input[id = active').prop('checked', true);
            } else {
              $('input[id = inactive').prop('checked', true);
            }
          }
        }
      </script>
    </main>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
