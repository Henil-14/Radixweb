<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD</title>
    <script src="https://code.jquery.com/jquery-3.6.4.js"
        integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
</head>

<body>
    <input type="number" id="eid" style="display: none;">
    <label for="">Name</label><br>
    <input type="text" name="" id="name"><br><br>

    <label for="">Email</label><br>
    <input type="text" name="" id="email"><br><br>

    <label for="">Gender</label><br>
    <input type="radio" name="gender" id="male" value="male">Male
    <input type="radio" name="gender" id="female" value="female">Female
    <br><br>

    <label for="">Status</label><br>
    <input type="radio" name="status" id="active" value="active">Active
    <input type="radio" name="status" id="inactive" value="inactive">Inactive
    <br><br>


    <button id="getData">Get Data</button>

    <button id="postData">Post Data</button>

    <button id="updateData">Update Data</button>






    <table id="tab"></table>


    <script>


        function get() {


            var settings = {
                "url": "https://gorest.co.in/public/v2/users/",
                "method": "GET",
                "timeout": 0,
                "headers": {
                    "Authorization": "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c"
                },
            };

            $.ajax(settings).done(function (response) {
                call(response);
            });
            function call(response) {
                $('#tab').empty()
                $("#tab").append(`<tr> <th>ID</th> <th>NAME</th> <th>EMAIL</th> <th>GENDER</th> <th>STATUS</th> </tr>`)
                for (i of response) {
                        $('#tab').append(`<tr> <td>${i.id}</td> 
                            <td>${i.name}</td>
                            <td>${i.email}</td>
                            <td>${i.gender}</td> 
                            <td>${i.status}</td> 
                            <td><button onclick="deleteData(${i.id})">Delete</button></td>
                            <td><button onclick="update(${i.id})" > Edit</button></td> </tr>`)
                }
            }
        }

        $("#getData").click(function () {
            get()
        })





        function deleteData(id) {
            alert('You have select ' + id)
            var settings = {
                "url": "https://gorest.co.in/public/v2/users/" + id,
                "method": "DELETE",
                "timeout": 0,
                "headers": {
                    "Authorization": "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c"
                },
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
            });
            alert('Selected ID is deleted')
            get()

        }

        function post() {
            alert('data posted')

            var settings = {
                "url": "https://gorest.co.in/public/v2/users/",
                "method": "POST",
                "timeout": 0,
                "headers": {
                    "Authorization": "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c",
                    "Content-Type": "application/json"
                },
                "data": JSON.stringify({
                    "name": $("#name").val(),
                    "email": $("#email").val(),
                    "gender": $("input[ name='gender']:checked").val(),
                    "status": $("input[name ='status']:checked").val(),
                }),
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
            });

        }


        $("#postData").click(function () {

            post()
            get()
        })

        function update(id) {
            // alert(id)
            var settings = {
                "url": "https://gorest.co.in/public/v2/users/" + id,
                "method": "GET",
                "timeout": 0,
                "headers": {
                    "Authorization": "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c"
                },
            };

            $.ajax(settings).done(function (response) {
                put(response)
                function put(response) {
                    $('#eid').val(response.id)
                    $('#name').val(response.name)
                    $('#email').val(response.email)
                    if (response.gender == 'male') {
                        $('input[value=male]').prop('checked', true);
                    } else {
                        $('input[value=female]').prop('checked', true);
                    }
                    if (response.status == 'active') {
                        $('input[value=active]').prop('checked', true);
                    } else {
                        $('input[value=inactive]').prop('checked', true);
                    }

                }
            });
        }


        function updateData(id) {

            var settings = {
                "url": "https://gorest.co.in/public/v2/users/" + id,
                "method": "PATCH",
                "timeout": 0,
                "headers": {
                    "Authorization": "Bearer 1981bc7bfe89a36b0cca313e29ac4284c099e4718731f010c851a473c1367b1c",
                    "Content-Type": "application/json"
                },
                "data": JSON.stringify({
                    "name": $("#name").val(),
                    "email": $("#email").val(),
                    "gender": $("input[ name='gender']:checked").val(),
                    "status": $("input[name ='status']:checked").val(),
                }),
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
            });
        }
        $("#updateData").click(function () {
        var id =    $('#eid').val()
            updateData(id)
            alert(id)
        })





    </script>
</body>

</html>